// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Community {
  id        String   @id @default(cuid()) // ä¸€æ„ãªID
  name      String   // ã‚µãƒ¼ãƒãƒ¼å
  webhook   String?  // é€šçŸ¥ç”¨ã®Discord Webhook URLï¼ˆå¾Œã€…ä½¿ã†ï¼‰
  createdAt DateTime @default(now())
  scheduleEntries ScheduleEntry[]
}


model ScheduleEntry {
  id           Int      @id @default(autoincrement())
  userName     String
  timeSlots    String   // JSON.stringifyã•ã‚ŒãŸé…åˆ—
  date         String   // "YYYY-MM-DD"
  communityId  String   // ğŸ‘ˆ å¤–éƒ¨ã‚­ãƒ¼ã§Communityã¨ç´ä»˜ã‘
  createdAt    DateTime @default(now())

  community Community @relation(fields: [communityId], references: [id])
  @@unique([userName, communityId, date], name: "unique_user_schedule") // âœ… ã“ã‚Œã‚’è¿½åŠ ï¼
}
